import{_ as P,$ as _,a0 as B}from"./bundled-types-BMAgrwgx.js";import{f as Y,g as J,C as Q,H as y,b as G,d as Z,F as X,S as $,e as K}from"./lspLanguageFeatures-BId_APmS.js";import{a as Nn,D as En,h as Un,R as Dn,c as Bn,i as Rn,j as Fn,t as Wn,k as hn}from"./lspLanguageFeatures-BId_APmS.js";import"../modules/shiki-CbdGH6sH.js";import"../modules/vue-WKmexWeo.js";import"../modules/file-saver-C8QSpN-3.js";const x=120*1e3;class C{constructor(i){this._defaults=i,this._worker=null,this._client=null,this._idleCheckInterval=window.setInterval(()=>this._checkIfIdle(),30*1e3),this._lastUsedTime=0,this._configChangeListener=this._defaults.onDidChange(()=>this._stopWorker())}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}dispose(){clearInterval(this._idleCheckInterval),this._configChangeListener.dispose(),this._stopWorker()}_checkIfIdle(){if(!this._worker)return;Date.now()-this._lastUsedTime>x&&this._stopWorker()}_getClient(){return this._lastUsedTime=Date.now(),this._client||(this._worker=P({moduleId:"vs/language/json/jsonWorker",createWorker:()=>new Worker(new URL("/lightning-talks/10-discriminated-unions/assets/json.worker-BoL8UZqY.js",import.meta.url),{type:"module"}),label:this._defaults.languageId,createData:{languageSettings:this._defaults.diagnosticsOptions,languageId:this._defaults.languageId,enableSchemaRequest:this._defaults.diagnosticsOptions.enableSchemaRequest}}),this._client=this._worker.getProxy()),this._client}getLanguageServiceWorker(...i){let t;return this._getClient().then(e=>{t=e}).then(e=>{if(this._worker)return this._worker.withSyncedResources(i)}).then(e=>t)}}function nn(n,i=!1){const t=n.length;let e=0,o="",p=0,l=16,u=0,g=0,w=0,v=0,c=0;function O(s,m){let a=0,r=0;for(;a<s;){let f=n.charCodeAt(e);if(f>=48&&f<=57)r=r*16+f-48;else if(f>=65&&f<=70)r=r*16+f-65+10;else if(f>=97&&f<=102)r=r*16+f-97+10;else break;e++,a++}return a<s&&(r=-1),r}function U(s){e=s,o="",p=0,l=16,c=0}function N(){let s=e;if(n.charCodeAt(e)===48)e++;else for(e++;e<n.length&&T(n.charCodeAt(e));)e++;if(e<n.length&&n.charCodeAt(e)===46)if(e++,e<n.length&&T(n.charCodeAt(e)))for(e++;e<n.length&&T(n.charCodeAt(e));)e++;else return c=3,n.substring(s,e);let m=e;if(e<n.length&&(n.charCodeAt(e)===69||n.charCodeAt(e)===101))if(e++,(e<n.length&&n.charCodeAt(e)===43||n.charCodeAt(e)===45)&&e++,e<n.length&&T(n.charCodeAt(e))){for(e++;e<n.length&&T(n.charCodeAt(e));)e++;m=e}else c=3;return n.substring(s,m)}function H(){let s="",m=e;for(;;){if(e>=t){s+=n.substring(m,e),c=2;break}const a=n.charCodeAt(e);if(a===34){s+=n.substring(m,e),e++;break}if(a===92){if(s+=n.substring(m,e),e++,e>=t){c=2;break}switch(n.charCodeAt(e++)){case 34:s+='"';break;case 92:s+="\\";break;case 47:s+="/";break;case 98:s+="\b";break;case 102:s+="\f";break;case 110:s+=`
`;break;case 114:s+="\r";break;case 116:s+="	";break;case 117:const f=O(4);f>=0?s+=String.fromCharCode(f):c=4;break;default:c=5}m=e;continue}if(a>=0&&a<=31)if(I(a)){s+=n.substring(m,e),c=2;break}else c=6;e++}return s}function D(){if(o="",c=0,p=e,g=u,v=w,e>=t)return p=t,l=17;let s=n.charCodeAt(e);if(E(s)){do e++,o+=String.fromCharCode(s),s=n.charCodeAt(e);while(E(s));return l=15}if(I(s))return e++,o+=String.fromCharCode(s),s===13&&n.charCodeAt(e)===10&&(e++,o+=`
`),u++,w=e,l=14;switch(s){case 123:return e++,l=1;case 125:return e++,l=2;case 91:return e++,l=3;case 93:return e++,l=4;case 58:return e++,l=6;case 44:return e++,l=5;case 34:return e++,o=H(),l=10;case 47:const m=e-1;if(n.charCodeAt(e+1)===47){for(e+=2;e<t&&!I(n.charCodeAt(e));)e++;return o=n.substring(m,e),l=12}if(n.charCodeAt(e+1)===42){e+=2;const a=t-1;let r=!1;for(;e<a;){const f=n.charCodeAt(e);if(f===42&&n.charCodeAt(e+1)===47){e+=2,r=!0;break}e++,I(f)&&(f===13&&n.charCodeAt(e)===10&&e++,u++,w=e)}return r||(e++,c=1),o=n.substring(m,e),l=13}return o+=String.fromCharCode(s),e++,l=16;case 45:if(o+=String.fromCharCode(s),e++,e===t||!T(n.charCodeAt(e)))return l=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=N(),l=11;default:for(;e<t&&d(s);)e++,s=n.charCodeAt(e);if(p!==e){switch(o=n.substring(p,e),o){case"true":return l=8;case"false":return l=9;case"null":return l=7}return l=16}return o+=String.fromCharCode(s),e++,l=16}}function d(s){if(E(s)||I(s))return!1;switch(s){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function z(){let s;do s=D();while(s>=12&&s<=15);return s}return{setPosition:U,getPosition:()=>e,scan:i?z:D,getToken:()=>l,getTokenValue:()=>o,getTokenOffset:()=>p,getTokenLength:()=>e-p,getTokenStartLine:()=>g,getTokenStartCharacter:()=>p-v,getTokenError:()=>c}}function E(n){return n===32||n===9}function I(n){return n===10||n===13}function T(n){return n>=48&&n<=57}var R;(function(n){n[n.lineFeed=10]="lineFeed",n[n.carriageReturn=13]="carriageReturn",n[n.space=32]="space",n[n._0=48]="_0",n[n._1=49]="_1",n[n._2=50]="_2",n[n._3=51]="_3",n[n._4=52]="_4",n[n._5=53]="_5",n[n._6=54]="_6",n[n._7=55]="_7",n[n._8=56]="_8",n[n._9=57]="_9",n[n.a=97]="a",n[n.b=98]="b",n[n.c=99]="c",n[n.d=100]="d",n[n.e=101]="e",n[n.f=102]="f",n[n.g=103]="g",n[n.h=104]="h",n[n.i=105]="i",n[n.j=106]="j",n[n.k=107]="k",n[n.l=108]="l",n[n.m=109]="m",n[n.n=110]="n",n[n.o=111]="o",n[n.p=112]="p",n[n.q=113]="q",n[n.r=114]="r",n[n.s=115]="s",n[n.t=116]="t",n[n.u=117]="u",n[n.v=118]="v",n[n.w=119]="w",n[n.x=120]="x",n[n.y=121]="y",n[n.z=122]="z",n[n.A=65]="A",n[n.B=66]="B",n[n.C=67]="C",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.G=71]="G",n[n.H=72]="H",n[n.I=73]="I",n[n.J=74]="J",n[n.K=75]="K",n[n.L=76]="L",n[n.M=77]="M",n[n.N=78]="N",n[n.O=79]="O",n[n.P=80]="P",n[n.Q=81]="Q",n[n.R=82]="R",n[n.S=83]="S",n[n.T=84]="T",n[n.U=85]="U",n[n.V=86]="V",n[n.W=87]="W",n[n.X=88]="X",n[n.Y=89]="Y",n[n.Z=90]="Z",n[n.asterisk=42]="asterisk",n[n.backslash=92]="backslash",n[n.closeBrace=125]="closeBrace",n[n.closeBracket=93]="closeBracket",n[n.colon=58]="colon",n[n.comma=44]="comma",n[n.dot=46]="dot",n[n.doubleQuote=34]="doubleQuote",n[n.minus=45]="minus",n[n.openBrace=123]="openBrace",n[n.openBracket=91]="openBracket",n[n.plus=43]="plus",n[n.slash=47]="slash",n[n.formFeed=12]="formFeed",n[n.tab=9]="tab"})(R||(R={}));new Array(20).fill(0).map((n,i)=>" ".repeat(i));const A=200;new Array(A).fill(0).map((n,i)=>`
`+" ".repeat(i)),new Array(A).fill(0).map((n,i)=>"\r"+" ".repeat(i)),new Array(A).fill(0).map((n,i)=>`\r
`+" ".repeat(i)),new Array(A).fill(0).map((n,i)=>`
`+"	".repeat(i)),new Array(A).fill(0).map((n,i)=>"\r"+"	".repeat(i)),new Array(A).fill(0).map((n,i)=>`\r
`+"	".repeat(i));var F;(function(n){n.DEFAULT={allowTrailingComma:!1}})(F||(F={}));const en=nn;var W;(function(n){n[n.None=0]="None",n[n.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=2]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",n[n.InvalidUnicode=4]="InvalidUnicode",n[n.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",n[n.InvalidCharacter=6]="InvalidCharacter"})(W||(W={}));var h;(function(n){n[n.OpenBraceToken=1]="OpenBraceToken",n[n.CloseBraceToken=2]="CloseBraceToken",n[n.OpenBracketToken=3]="OpenBracketToken",n[n.CloseBracketToken=4]="CloseBracketToken",n[n.CommaToken=5]="CommaToken",n[n.ColonToken=6]="ColonToken",n[n.NullKeyword=7]="NullKeyword",n[n.TrueKeyword=8]="TrueKeyword",n[n.FalseKeyword=9]="FalseKeyword",n[n.StringLiteral=10]="StringLiteral",n[n.NumericLiteral=11]="NumericLiteral",n[n.LineCommentTrivia=12]="LineCommentTrivia",n[n.BlockCommentTrivia=13]="BlockCommentTrivia",n[n.LineBreakTrivia=14]="LineBreakTrivia",n[n.Trivia=15]="Trivia",n[n.Unknown=16]="Unknown",n[n.EOF=17]="EOF"})(h||(h={}));var j;(function(n){n[n.InvalidSymbol=1]="InvalidSymbol",n[n.InvalidNumberFormat=2]="InvalidNumberFormat",n[n.PropertyNameExpected=3]="PropertyNameExpected",n[n.ValueExpected=4]="ValueExpected",n[n.ColonExpected=5]="ColonExpected",n[n.CommaExpected=6]="CommaExpected",n[n.CloseBraceExpected=7]="CloseBraceExpected",n[n.CloseBracketExpected=8]="CloseBracketExpected",n[n.EndOfFileExpected=9]="EndOfFileExpected",n[n.InvalidCommentToken=10]="InvalidCommentToken",n[n.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",n[n.UnexpectedEndOfString=12]="UnexpectedEndOfString",n[n.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",n[n.InvalidUnicode=14]="InvalidUnicode",n[n.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",n[n.InvalidCharacter=16]="InvalidCharacter"})(j||(j={}));function tn(n){return{getInitialState:()=>new L(null,null,!1,null),tokenize:(i,t)=>rn(n,i,t)}}const M="delimiter.bracket.json",S="delimiter.array.json",sn="delimiter.colon.json",ln="delimiter.comma.json",on="keyword.json",un="keyword.json",cn="string.value.json",fn="number.json",pn="string.key.json",gn="comment.block.json",mn="comment.line.json";class b{constructor(i,t){this.parent=i,this.type=t}static pop(i){return i?i.parent:null}static push(i,t){return new b(i,t)}static equals(i,t){if(!i&&!t)return!0;if(!i||!t)return!1;for(;i&&t;){if(i===t)return!0;if(i.type!==t.type)return!1;i=i.parent,t=t.parent}return!0}}class L{constructor(i,t,e,o){this._state=i,this.scanError=t,this.lastWasColon=e,this.parents=o}clone(){return new L(this._state,this.scanError,this.lastWasColon,this.parents)}equals(i){return i===this?!0:!i||!(i instanceof L)?!1:this.scanError===i.scanError&&this.lastWasColon===i.lastWasColon&&b.equals(this.parents,i.parents)}getStateData(){return this._state}setStateData(i){this._state=i}}function rn(n,i,t,e=0){let o=0,p=!1;switch(t.scanError){case 2:i='"'+i,o=1;break;case 1:i="/*"+i,o=2;break}const l=en(i);let u=t.lastWasColon,g=t.parents;const w={tokens:[],endState:t.clone()};for(;;){let v=e+l.getPosition(),c="";const O=l.scan();if(O===17)break;if(v===e+l.getPosition())throw new Error("Scanner did not advance, next 3 characters are: "+i.substr(l.getPosition(),3));switch(p&&(v-=o),p=o>0,O){case 1:g=b.push(g,0),c=M,u=!1;break;case 2:g=b.pop(g),c=M,u=!1;break;case 3:g=b.push(g,1),c=S,u=!1;break;case 4:g=b.pop(g),c=S,u=!1;break;case 6:c=sn,u=!0;break;case 5:c=ln,u=!1;break;case 8:case 9:c=on,u=!1;break;case 7:c=un,u=!1;break;case 10:const N=(g?g.type:0)===1;c=u||N?cn:pn,u=!1;break;case 11:c=fn,u=!1;break}switch(O){case 12:c=mn;break;case 13:c=gn;break}w.endState=new L(t.getStateData(),l.getTokenError(),u,g),w.tokens.push({startIndex:v,scopes:c})}return w}let k;function An(){return new Promise((n,i)=>{if(!k)return i("JSON not registered!");n(k)})}class kn extends K{constructor(i,t,e){super(i,t,e.onDidChange),this._disposables.push(B.onWillDisposeModel(o=>{this._resetSchema(o.uri)})),this._disposables.push(B.onDidChangeModelLanguage(o=>{this._resetSchema(o.model.uri)}))}_resetSchema(i){this._worker().then(t=>{t.resetSchema(i.toString())})}}function On(n){const i=[],t=[],e=new C(n);i.push(e),k=(...l)=>e.getLanguageServiceWorker(...l);function o(){const{languageId:l,modeConfiguration:u}=n;q(t),u.documentFormattingEdits&&t.push(_.registerDocumentFormattingEditProvider(l,new Y(k))),u.documentRangeFormattingEdits&&t.push(_.registerDocumentRangeFormattingEditProvider(l,new J(k))),u.completionItems&&t.push(_.registerCompletionItemProvider(l,new Q(k,[" ",":",'"']))),u.hovers&&t.push(_.registerHoverProvider(l,new y(k))),u.documentSymbols&&t.push(_.registerDocumentSymbolProvider(l,new G(k))),u.tokens&&t.push(_.setTokensProvider(l,tn(!0))),u.colors&&t.push(_.registerColorProvider(l,new Z(k))),u.foldingRanges&&t.push(_.registerFoldingRangeProvider(l,new X(k))),u.diagnostics&&t.push(new kn(l,k,n)),u.selectionRanges&&t.push(_.registerSelectionRangeProvider(l,new $(k)))}o(),i.push(_.setLanguageConfiguration(n.languageId,an));let p=n.modeConfiguration;return n.onDidChange(l=>{l.modeConfiguration!==p&&(p=l.modeConfiguration,o())}),i.push(V(t)),V(i)}function V(n){return{dispose:()=>q(n)}}function q(n){for(;n.length;)n.pop().dispose()}const an={wordPattern:/(-?\d*\.\d\w*)|([^\[\{\]\}\:\"\,\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"]],autoClosingPairs:[{open:"{",close:"}",notIn:["string"]},{open:"[",close:"]",notIn:["string"]},{open:'"',close:'"',notIn:["string"]}]};export{Q as CompletionAdapter,Nn as DefinitionAdapter,K as DiagnosticsAdapter,Z as DocumentColorAdapter,Y as DocumentFormattingEditProvider,En as DocumentHighlightAdapter,Un as DocumentLinkAdapter,J as DocumentRangeFormattingEditProvider,G as DocumentSymbolAdapter,X as FoldingRangeAdapter,y as HoverAdapter,Dn as ReferenceAdapter,Bn as RenameAdapter,$ as SelectionRangeAdapter,C as WorkerManager,Rn as fromPosition,Fn as fromRange,An as getWorker,On as setupMode,Wn as toRange,hn as toTextEdit};
